this is automatic script for 

https://docs.fortinet.com/vm/alicloud/fortigate/6.4/alicloud-cookbook/6.4.0/967820/deploying-fortigate-vm-ha-on-alicloud-between-availability-zones



this script will create two Fortigate BYOL instances in aliyun hongkong region zone b and zone c
this script will also create a webserver with ip 10.0.12.109 in subnet 10.0.12.0/24 zone b 
the webserver default password is root/Welcome.123
this script will create 3 EIP address. EIP1 and EIP2 are mgmt IP for FGT1 and FGT2. EIP3 is for public internet access.
after created FGT1 and FGT2 instance, use https://EIP1:443 and https://EIP2:443 to access fortigate.
to run this script. you need aliyun account or access key/secret with fullECS, EIP, VPC, RAM full access privilege.
you will also need to get two Fortigate license. 

the default region is cn-hongkong. the default fortigate image is 6.4.1 BYOL

example 
use ./cn-zhangjiakou.sh  to deploy two fortigate and one web server at region cn-zhangjiakou.
modify cn-zhangjiakou.sh accordingly if you want change region or other parameters.

after run ./cn-zhangjiakou.sh. below resource will be deployed.


terraform output
ActiveFortigateEIP3 = "8.142.20.180"
PrimaryFortigateAvailability_zone = "cn-zhangjiakou-a"
PrimaryFortigateID = "i-8vbj198j8co2vv0mlkgr"
PrimaryFortigatePrivateIP = "10.0.11.11"
PrimaryFortigatePublicIP = ""
PrimaryFortigate_MGMT_EIP = "8.142.18.142"
SecondaryFortigateAvailability_zone = "cn-zhangjiakou-c"
SecondaryFortigateID = "i-8vbe7laguyy49mi442gl"
SecondaryFortigatePrivateIP = "10.0.21.12"
SecondaryFortigatePublicIP = ""
SecondaryFortigate_MGMT_EIP = "8.142.21.3"
WebStartupFile = <<EOT
#!/bin/bash -v
echo "userdata-start"
sudo apt update -y
sudo apt install -y nginx
sudo sed -i 's/80/8080/' /etc/nginx/sites-available/default
sudo service nginx stop
sudo service nginx start
echo "userdata-end"


EOT
